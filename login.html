<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Login PAONGDEV</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background-image: url('https://placehold.co/1920x1080/4F46E5/ffffff/png?text=Pemandangan+Alam');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease-in-out;
        }
        .glass-card:hover {
            box-shadow: 0 8px 12px rgba(0, 0, 0, 0.15);
        }
        input, button {
            transition: all 0.2s ease-in-out;
        }
        .logo-container {
            display: flex;
            justify-content: center;
            margin-bottom: 2rem;
        }
        .logo-container img {
            width: 100px;
            height: auto;
            border-radius: 50%;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }
    </style>
</head>
<body class="font-sans text-gray-800">
    <div id="login-container" class="min-h-screen flex flex-col items-center justify-center p-4">
        <div class="glass-card w-full max-w-sm text-center p-8">
            <div class="logo-container">
                <img src="https://files.catbox.moe/xlq6zp.jpg" alt="PAONGDEV Logo">
            </div>
            <h1 class="text-3xl font-bold mb-4 text-white drop-shadow-md">Sistem Login PAONGDEV</h1>
            <p class="text-sm text-white mb-6 drop-shadow-md">Masuk untuk mengelola website Anda.</p>
            <form id="login-form" class="space-y-4">
                <div>
                    <input type="email" id="email" placeholder="Email Admin" class="w-full px-4 py-2 bg-white bg-opacity-70 border-transparent rounded-md focus:bg-white focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                </div>
                <div>
                    <input type="password" id="password" placeholder="Kata Sandi" class="w-full px-4 py-2 bg-white bg-opacity-70 border-transparent rounded-md focus:bg-white focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                </div>
                <div class="g-recaptcha" data-sitekey="6Lc-f10aAAAAAPqYt2Bw1s0QvR5w9zF8Jq9L2g_Q" data-callback="onSubmit" data-size="invisible"></div>
                <button type="submit" id="login-btn" class="w-full bg-blue-600 text-white font-bold py-2 rounded-md hover:bg-blue-700 transition duration-300">
                    Masuk
                </button>
            </form>
            <p id="message" class="mt-4 text-sm text-red-300 drop-shadow-md"></p>
        </div>
    </div>
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
    <script type="module">
        import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.44.2/dist/module/index.js';

        const SUPABASE_URL_VAR = typeof __SUPABASE_URL !== 'undefined' ? __SUPABASE_URL : null;
        const SUPABASE_ANON_KEY_VAR = typeof __SUPABASE_ANON_KEY !== 'undefined' ? __SUPABASE_ANON_KEY : null;

        const supabase = SUPABASE_URL_VAR && SUPABASE_ANON_KEY_VAR
            ? createClient(SUPABASE_URL_VAR, SUPABASE_ANON_KEY_VAR)
            : null;

        async function handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const messageEl = document.getElementById('message');
            const loginBtn = document.getElementById('login-btn');
            
            if (!supabase) {
                messageEl.textContent = "Kredensial Supabase tidak ditemukan. Mohon atur di Vercel.";
                return;
            }

            loginBtn.textContent = 'Memuat...';
            loginBtn.disabled = true;

            setTimeout(async () => {
                const isVerified = true;

                if (isVerified) {
                    const { data, error } = await supabase.auth.signInWithPassword({
                        email: email,
                        password: password
                    });

                    if (error) {
                        messageEl.textContent = `Login gagal: ${error.message}`;
                    } else {
                        window.location.href = 'dashboard.html';
                    }
                } else {
                    messageEl.textContent = "Verifikasi gagal. Silakan coba lagi.";
                }

                loginBtn.textContent = 'Masuk';
                loginBtn.disabled = false;
            }, 1000);
        }
        
        document.getElementById('login-form').addEventListener('submit', handleLogin);
    </script>
</body>
</html>

